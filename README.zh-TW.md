# Smart Agents - Claude Code 智能提示增強系統

> **透過智能路由、提示優化和性能追蹤，將 Claude Code 轉變為專業的 AI 開發團隊。**

[![License: GPL v3](https://img.shields.io/badge/License-GPLv3-blue.svg)](https://www.gnu.org/licenses/gpl-3.0)
[![Version](https://img.shields.io/badge/version-2.1.0-blue.svg)](https://github.com/kevintseng/smart-agents/releases)
[![Node.js >= 18.0.0](https://img.shields.io/badge/node-%3E%3D18.0.0-brightgreen.svg)](https://nodejs.org/)
[![Claude Code MCP](https://img.shields.io/badge/Claude_Code-MCP_Server-purple.svg)](https://modelcontextprotocol.io/)

[English](README.md) | [繁體中文](#)

---

## 🎯 什麼是 Smart Agents？

**Smart Agents** 是一個 **MCP (Model Context Protocol) 伺服器**，透過智能提示優化和任務路由，為 Claude Code 提供**專業化 AI 代理**能力。

**簡單來說：** 它讓 Claude Code 更聰明：
- 🎯 **路由** 你的任務到合適的專業代理
- ✨ **優化** 提示詞，結合領域專業知識和最佳實踐
- 📊 **追蹤** 成本和性能，自動化管理
- 🧠 **學習** 從成功模式中持續進化

---

## 💡 為什麼需要 Smart Agents？

### 使用 Claude Code 時的挑戰

當你用 Claude Code「無腦寫代碼」時，可能會遇到：

- 🤔 **同一套方法處理所有事** - 無論是除錯、設計 API 還是寫文檔，Claude 都用相同的通用知識，缺乏專業領域的深度
- 💭 **不記得成功經驗** - Claude 不記得昨天哪個方案效果好，所以你要重複解釋相同的背景
- 💰 **總是用最強火力** - 每個任務都用同一個強大（昂貴）的模型，就算是簡單問題也一樣
- ✍️ **需要手動精雕細琢提示詞** - 複雜任務需要你寫出詳細的提示才能得到好結果

### Smart Agents 如何解決這些問題

Smart Agents 在你和 Claude Code 之間加入智能層：

- 🎯 **自動提供專業知識** - 你的除錯請求自動獲得除錯專家知識，設計請求獲得架構模式，安全審查獲得安全最佳實踐
- 🧠 **記住有效的方法** - 記住成功的解決方案，並在未來類似任務中自動應用
- 💡 **智能成本控制** - 為簡單任務建議使用輕量模型，為複雜挑戰保留強大模型
- ✨ **自動優化提示** - 將你的隨意請求轉換為包含領域知識和最佳實踐的優化提示

**簡單比喻：** 就像給 Claude Code 配備一個專家團隊（代碼審查員、架構師、除錯專家等）和一個好記憶 - 讓你專注創作，而不是提示工程。

**它是什麼：**
- Claude Code 的提示增強層
- 擁有 13 個專業代理的 MCP 伺服器
- 智能任務路由系統
- 成本與性能追蹤工具

---

## 🚀 Smart Agents 如何運作

### 架構概覽

```
┌─────────────────────────────────────────────────────────────────┐
│                         Claude Code CLI                         │
│                      (你的開發介面)                              │
└───────────────────────────┬─────────────────────────────────────┘
                            │
                            │ MCP 協議
                            ▼
┌─────────────────────────────────────────────────────────────────┐
│                    Smart Agents MCP 伺服器                       │
│                                                                 │
│  ┌──────────────┐    ┌──────────────┐    ┌──────────────┐    │
│  │ 任務分析器   │───▶│ 代理路由器   │───▶│ 成本追蹤器   │    │
│  └──────────────┘    └──────────────┘    └──────────────┘    │
│                            │                                    │
│                            ▼                                    │
│              ┌─────────────────────────┐                       │
│              │   13 個專業代理         │                       │
│              └─────────────────────────┘                       │
└─────────────────────────────────────────────────────────────────┘
                            │
                            ▼
        ┌────────────────────┴────────────────────┐
        │                                         │
        ▼                                         ▼
┌──────────────────┐                   ┌──────────────────┐
│   實作代理       │                   │   增強提示       │
│  (5 個實作)      │                   │  (7 個模板)      │
├──────────────────┤                   ├──────────────────┤
│ • RAG 代理       │                   │ • 代碼審查       │
│ • 演化系統       │                   │ • 除錯器         │
│ • 知識圖譜       │                   │ • 重構器         │
│ • 開發管家       │                   │ • API 設計師     │
│ • 測試撰寫器     │                   │ • 研究員         │
└──────────────────┘                   │ • 架構師         │
                                       │ • 數據分析師     │
                                       └──────────────────┘
```

### 請求流程

```
1. 用戶請求
   ↓
2. 任務分析（複雜度、能力需求）
   ↓
3. 代理選擇（路由到最適合的代理）
   ↓
4. 提示增強（優化領域專業知識）
   ↓
5. 性能追蹤（成本、時間、品質）
   ↓
6. 學習與適應（改進未來路由）
```

### 技術堆疊

**核心技術：**
- **Node.js**（>= 18.0.0）- 執行環境
- **TypeScript** - 型別安全開發
- **Model Context Protocol (MCP)** - Claude Code 整合
- **SQLite**（含 WAL 模式）- 性能追蹤與演化儲存
- **Vectra** - 知識圖譜向量資料庫

**可選依賴：**
- **OpenAI API** - RAG 語義搜尋的嵌入向量（需要 API 金鑰）

**開發工具：**
- **Vitest** - 測試框架
- **ESLint** - 代碼品質
- **Prettier** - 代碼格式化

---

## ✨ 主要優勢

### 🎯 對開發者

- **更快開發**：為每個任務選擇合適的代理 = 更快獲得更好的解決方案
- **成本優化**：追蹤並優化所有互動的 token 使用量
- **品質保證**：專業代理自動應用領域最佳實踐
- **學習曲線**：無需精心設計完美提示 - 代理會為你優化

### 📊 對團隊

- **一致性**：所有團隊成員都能受益於相同的代理專業知識
- **可見性**：追蹤跨專案的成本和性能
- **可擴展性**：輕鬆為特定工作流程添加自定義代理
- **整合性**：與現有的 Claude Code 設置無縫整合

### 🧠 對 AI 愛好者

- **演化系統**：代理從成功模式中學習並隨時間改進
- **知識圖譜**：建立並查詢關於專案的結構化知識
- **RAG 整合**：對專案文件和代碼進行語義搜尋
- **MCP 架構**：現代化、可擴展的 AI 工具整合協議

---

## 🎪 13 個專業代理

### 實作代理（5 個）

| 代理 | 用途 | 主要功能 |
|------|------|----------|
| **RAG 代理** *（可選 - 需要 OpenAI API 金鑰）* | 語義搜尋與檢索 | 向量搜尋、文件索引、上下文感知回應 |
| **演化系統** | 性能優化 | 模式學習、自適應路由、成本優化 |
| **知識圖譜** | 結構化知識管理 | 實體關係、查詢語言、知識綜合 |
| **開發管家** | 事件驅動自動化 | 檢查點檢測、工作流程整合、掛鉤系統 |
| **測試撰寫器** | 自動化測試生成 | TDD 工作流程、覆蓋率分析、測試場景 |

### 增強提示代理（7 個）

| 代理 | 領域 | 優化重點 |
|------|------|----------|
| **代碼審查** | 代碼品質 | 安全性、性能、最佳實踐 |
| **除錯器** | 問題解決 | 根本原因分析、系統化除錯 |
| **重構器** | 代碼改進 | 設計模式、可維護性、簡化 |
| **API 設計師** | API 開發 | REST/GraphQL 設計、文件 |
| **研究代理** | 技術調查 | 深度研究、競爭分析 |
| **架構代理** | 系統設計 | 可擴展性、模式、權衡 |
| **數據分析師** | 數據洞察 | 統計分析、視覺化 |

### 可選功能（1 個）

| 功能 | 用途 | 需求 |
|------|------|------|
| **知識綜合** | 跨代理學習 | 使用功能標誌啟用 |

---

## 🚀 快速開始

### 一鍵安裝

**只需告訴 Claude Code：**

```
"Install smart-agents MCP from https://github.com/kevintseng/smart-agents"
```

Claude Code 會處理一切：
- ✅ 複製儲存庫
- ✅ 安裝依賴項
- ✅ 配置 MCP 伺服器
- ✅ 設置可選功能（RAG、API 金鑰）
- ✅ 驗證安裝

**安裝時間：** 2-5 分鐘

### 安裝後

透過自然對話完成所有操作：

```
✅ "使用我的 OpenAI 金鑰啟用 RAG 功能"
✅ "修改代碼審查器以專注於安全性"
✅ "為 API 文件創建自定義代理"
✅ "顯示系統架構"
✅ "為什麼 RAG 代理無法運作？"
```

**無需手動配置、無需編輯文件 - 只需詢問！**

---

## 📋 前置需求

### 必需

- **Claude Code**（最新版本）
- **Node.js** >= 18.0.0
- **npm** >= 9.0.0

### 可選

- **OpenAI API Key**（用於 RAG 功能）
- **Git**（用於版本控制功能）

---

## 🤔 Smart Agents 適合你嗎？

### ✅ 最適合

- **軟體開發者** 構建複雜應用程式
- **技術文件撰寫者** 記錄大型代碼庫
- **DevOps 工程師** 自動化工作流程
- **團隊** 需要一致的 AI 協助
- **AI 愛好者** 探索 MCP 和代理系統

### ⚠️ 可能不太適合

- **程式初學者**（Claude Code 本身可能更簡單）
- **簡單專案**（< 1000 行代碼）
- **非技術用戶**（需要開發環境）
- **預算有限**（RAG 功能需要 OpenAI API 成本）

### 💡 快速決策指南

**選擇 Smart Agents，如果你：**
- ✅ 定期使用 Claude Code 進行開發
- ✅ 從事中大型專案
- ✅ 希望為不同任務獲得專業協助
- ✅ 需要成本/性能追蹤
- ✅ 重視學習和自適應系統

**跳過 Smart Agents，如果你：**
- ❌ 很少使用 Claude Code
- ❌ 只做小型腳本工作
- ❌ 偏好手動設計提示
- ❌ 不需要性能分析

---

## 📖 文件

### 快速連結

- **[安裝指南](docs/guides/CLAUDE_CODE_INSTALLATION.md)** - 詳細安裝說明
- **[架構概覽](docs/architecture/OVERVIEW.md)** - 系統設計和組件
- **[代理參考](docs/AGENT_REFERENCE.md)** - 所有代理說明
- **[API 文件](docs/API.md)** - MCP 工具介面

### 學習路徑

1. **從這裡開始**：[快速開始](#-快速開始)
2. **理解**：[架構概覽](#-smart-agents-如何運作)
3. **探索**：[代理參考](docs/AGENT_REFERENCE.md)
4. **深入**：[架構文件](docs/architecture/OVERVIEW.md)

**或詢問 Claude Code：** "解釋 Smart Agents 如何運作"

---

## 🧪 測試與品質

### 測試覆蓋率

```
✅ 447/447 測試通過（100%）
✅ 核心邏輯單元測試
✅ MCP 介面整合測試
✅ 代理工作流程 E2E 測試
✅ 演化系統回歸測試
```

### 執行測試

**詢問 Claude Code：**
```
"執行所有測試"
"執行測試並顯示覆蓋率"
"安全執行 E2E 測試"
```

**或手動執行：**
```bash
npm test                    # 所有測試
npm run test:coverage       # 含覆蓋率報告
npm run test:e2e:safe       # E2E 測試（資源監控）
```

---

## 🔧 開發

### 本地開發

```bash
# 複製儲存庫
git clone https://github.com/kevintseng/smart-agents
cd smart-agents

# 安裝依賴項
npm install

# 開發模式執行
npm run dev

# 執行 MCP 伺服器
npm run mcp
```

### 專案結構

```
smart-agents/
├── src/
│   ├── agents/           # 代理實作
│   ├── orchestrator/     # 路由與協調
│   ├── evolution/        # 學習與適應
│   ├── mcp/             # MCP 伺服器介面
│   └── utils/           # 共用工具
├── tests/               # 測試套件
├── docs/                # 文件
└── examples/            # 使用範例
```

---


## 📊 性能與指標

### 典型性能

- **任務分析**：< 100ms
- **代理路由**：< 50ms
- **提示增強**：< 200ms
- **演化學習**：背景執行，非阻塞

### 資源使用

- **記憶體**：~50MB（基礎）+ 代理特定
- **儲存空間**：~10MB（資料庫）+ 向量索引
- **網路**：僅 MCP 協議（除可選 RAG 外無外部 API）

---

## 📞 支援與社群

### 獲取幫助

1. **詢問 Claude Code**："幫我排查 Smart Agents 問題"
2. **GitHub Issues**：[回報錯誤或請求功能](https://github.com/kevintseng/smart-agents/issues)
3. **討論區**：[提問與分享想法](https://github.com/kevintseng/smart-agents/discussions)

### 保持更新

- **GitHub**：[關注發布](https://github.com/kevintseng/smart-agents)
- **變更日誌**：[CHANGELOG.md](CHANGELOG.md)
- **發布**：[發布說明](https://github.com/kevintseng/smart-agents/releases)

---

## 📝 授權

**GNU Affero 通用公共授權條款 v3.0**

本專案採用 GNU AGPL v3 授權。完整條款詳見 [LICENSE](LICENSE)。

主要條款：
- ✅ 自由使用、修改和分發
- ✅ 允許商業使用
- ✅ 必須公開原始碼
- ✅ **網路使用 = 分發**（即使作為 SaaS 使用也必須分享原始碼）
- ✅ 衍生作品必須使用 AGPL v3
- ✅ 必須記錄變更

---

## 🙏 致謝

使用以下技術構建：
- [Claude Code](https://claude.com/claude-code) - AI 驅動的開發 CLI
- [Model Context Protocol](https://modelcontextprotocol.io/) - 標準化 AI 工具整合
- [Anthropic Claude API](https://anthropic.com) - LLM 能力
- [OpenAI Embeddings](https://openai.com) - 語義搜尋（可選）

